# 2-ой этап создания счётчика

На странице 2-ого этапа создания счётчика укажите требуемые настройки:

* [Признак участия в рейтинге Топ-100](../nastroika-schyotchika.md)
* [Настройки счётчика: отображать виджет или нет, цвет виджета](2-oi-etap-sozdaniya-schyotchika.md#2.-nastroiki-schetchika-otobrazhat-vidzhet-ili-net-cvet-vidzheta)
* [Признак отображения в статистике данных только с указанных доменов](2-oi-etap-sozdaniya-schyotchika.md#3.-priznak-otobrazheniya-v-statistike-dannykh-tolko-s-ukazannykh-domenov)
* [Признак исключения указанных доменов](2-oi-etap-sozdaniya-schyotchika.md#4.-priznak-isklyucheniya-ukazannykh-domenov)
* [Признак аналитики блоков страниц](2-oi-etap-sozdaniya-schyotchika.md#5.-priznak-analitiki-blokov-stranic)

По факту завершения ввода данных Топ-100 автоматически сгенерирует код счётчика для вставки на сайт для асинхронной загрузки.

Код будет содержать атрибуты, определенные в соответствии с заданными настройками счётчика, и в том числе будет включать:

* Путь к библиотеке, отвечающей за работу счётчика Топ-100: `//st.top100.ru/top100/top100.js`
* Объявление элемента options с перечнем атрибутов счётчика:
  * `project` – обязательный атрибут, проставляется идентификатор счётчика,
  * `attributes_dataset` – опциональный атрибут, представляет собой перечень data-атрибутов, указанных в настройках аналитики блоков страниц.

**Пример объявления в коде элемента** `options` **с перечнем атрибутов счётчика:**

```
var options = {
    project: 'PROJECT_ID',
    attributes_dataset: [
        'attribute1',
        'attribute2'
    ]
};
```

После каждого изменения настроек счётчика (виджет/пиксель, цвет) и data-атрибута для сбора аналитики блоков страниц автоматически сгенерированный код будет обновляться.

Скопируйте данный код с помощью кнопки «Скопировать код» и установите его на все страницы сайта, по которым должна собираться статистика. Код можно встроить в любое место HTML-кода, желательно в начало страницы, чтобы счётчик успел загрузиться при коротких визитах. Он также доступен на странице настроек.

## 1. Участие в рейтинге

Для включения опции «Участие в рейтинге» перейдите в настройки счётчика. Вы также можете включить и настроить эту функцию сразу при создании счётчика. Участие в рейтинге Топ-100 позволит сравнить посещаемость и другие показатели вашего сайта с конкурентами. Подробнее читайте в подразделе «[Участие в рейтинге](../uchastie-v-reitinge/)».

## 2. **Настройки счётчика: отображение виджета**

Если указано, что виджет нужен, задан его цвет, то для его отображения необходимо при инициализации счётчика задать в его атрибутах идентификатор элемента `element`, где должен отображаться виджет. Также можно на каждой странице сайта, где требуется отобразить виджет, добавить вызов метода `drawLogoTo`, передавая туда идентификатор соответствующего элемента. Подробнее о настройке виджета читайте в подразделе «[Настройка счётчика](../nastroika-schyotchika.md)».

## 3. **Признак отображения в статистике данных только с указанных доменов**

Для отображения в статистике необходимо указать перечень доменов, данные с которых необходимо показывать в статистике. Подробнее о настройке доменов читайте в подразделе «[Настройка счётчика](../nastroika-schyotchika.md)».

{% hint style="info" %}
**ВНИМАНИЕ!** В статистику будут попадать данные только с этих доменов, вне зависимости от того, на каких ещё доменах/страницах будет установлен счётчик.
{% endhint %}

## 4. **Признак исключения указанных доменов**

Для исключения данных из статистики необходимо указать перечень доменов, которые необходимо исключить из статистики – указать один домен или несколько. Подробнее о настройке доменов читайте в подразделе «[Настройка счётчика](../nastroika-schyotchika.md)».

> _**Примечание:** Возможность исключить статистику может потребоваться, например, для тестовых стендов, где ведётся разработка сайта._

## 5. **Признак аналитики блоков страниц**

Для подключения сбора аналитики блоков страниц необходимо указать перечень data-атрибутов, используемых в разметке блоков страниц для сбора данных по количеству показов и нажатий на эти блоки. Подробнее – см. описание атрибута `attributes_dataset` и читайте в подразделе «[Настройка счётчика](../nastroika-schyotchika.md)».

## Сохраните изменения

{% hint style="warning" %}
Обязательно сохраните изменения, которые вы внесли в настройки счётчика, с помощью кнопки «Сохранить изменения» внизу страницы.
{% endhint %}

Обратите внимание, что изменить настройки счётчика вы можете в любой момент. в Подробнее о том, как настроить счётчик и дать доступ к нему другим пользователям – читайте в подразделе «[Настройка счётчика](../nastroika-schyotchika.md)».

# Ограничения и особенности применения

1\. Счётчик Топ-100 поддерживает до **8** (восьми) уровней вложенности блоков. Название каждого сегмента пути имеет ограничение в **255** символов. Всего блоков на одной странице может быть не более **500**.

2\. Показы блоков засчитываются, если блок непосредственно отобразился в рамках окна пользователя. Просмотренными считаются блоки, отобразившиеся на **10% и более**.

3\. Показы и клики суммируются на каждом уровне:

* Количество _показов_ для блока, имеющего дочерние элементы, рассчитывается как максимум из числа показов его дочерних элементов + собственные показы блока.&#x20;
* Количество _кликов_ для блока, имеющего дочерние элементы рассчитывается как сумма кликов на дочерние элементы + собственные клики на блок.

Значение CTR рассчитывается для каждого уровня отдельно и выражается как отношение кликов к показам.

{% hint style="info" %}
Чтобы собственные показы и клики родительского блока не суммировались с показами и кликами на дочерние блоки, рекомендуется размечать такие структуры линейно, без привязки к DOM-разметке. Подробнее см. в [правилах использования аналитики блоков, п.3](rekomendacii-po-nastroike-i-ispolzovaniyu.md).
{% endhint %}

4\. При разметке, где название data-атрибута родительского элемента отличается от названия data-атрибута наследника, клики по наследнику будут также вызывать дополнительные клики по родителю.

**Пример:**

В разметке одного из контейнеров есть отличающийся data-атрибут `data-new-attr`.&#x20;

```
<div data-just-test-attr="YOUR_LOGICAL_CONTAINER">
    <a href='link' data-just-test-attr="YOUR_LOGICAL_NAME_1">Linktext</a>
    <div data-new-attr="YOUR_LOGICAL_CONTAINER_2">
        <a href='link' data-just-test-attr="YOUR_LOGICAL_NAME_2">Linktext</a>
    </div>
</div>
```

> При клике на ссылку __ `YOUR_LOGICAL_NAME_2` получим два отправленных события клика: \
> `just-test-attr::YOUR_LOGICAL_CONTAINER::YOUR_LOGICAL_NAME_2`  и \
> `new-attr::YOUR_LOGICAL_CONTAINER_2`

Такое поведение обусловлено поднимающимся событием клика вверх по дереву элементов. Рекомендуется убирать лишние атрибуты из кода счётчика, а также убирать лишнюю разметку на странице, если нет прямой необходимости получать клики по ненужным атрибутам.

5\. При ре-рендере (перерисовке) элементов, размеченных аналитикой блоков, показы этих блоков будут отправляться счётчиком повторно, поскольку при перерисовке элемент фактически становится новым. Рекомендуется избегать ненужных перерисовок отслеживаемых элементов.&#x20;

# Описание принципов работы

Счётчик Топ-100 поддерживает до восьми уровней вложенности блоков. Накопленная статистика становится доступна для просмотра в отчёте «Аналитика блоков».

Для формирования корректного отчёта необходимо:

* передавать список отслеживаемых data-атрибутов в коде счётчика Топ-100 для каждой страницы сайта (параметр `'data-attributes'`)
* разметить data-атрибутами смысловые блоки на странице (подробнее - в [рекомендациях по настройке](rekomendacii-po-nastroike-i-ispolzovaniyu.md) и [практическом руководстве](prakticheskoe-rukovodstvo-po-razmetke-blokov/))

При указании нескольких data-атрибутов в отчёте «Аналитика блоков» статистика будет представлена в разрезе нескольких деревьев: название каждого data-атрибута станет первым уровнем дерева в отчёте.

{% hint style="info" %}
Например, если необходимо собирать три типа событий: клики по партнерским блокам, клики по блокам с новостями, клики по панели навигации, то для удобства работы с данными в отчёте можно создать три data-атрибута: `partner`, `news`, `navigation`.
{% endhint %}

Важно учитывать:

* Для отчёта «Аналитика блоков» собираются только показы блоков и клики по ним. Показы и клики суммируются для каждого уровня дерева размеченных элементов сайта.
* Количество показов для блока, имеющего дочерние элементы, рассчитывается как максимум из числа показов его дочерних элементов + собственные показы блока.
* В отчёте представлены CTR блоков. Значение CTR рассчитывается для каждого уровня отдельно и выражается как отношение кликов к показам.

{% hint style="info" %}
Перед тем как приступить к разметке блоков рекомендуем ознакомиться с [техническими ограничениями и особенностями работы счётчика](ogranicheniya-i-osobennosti-primeneniya.md).
{% endhint %}

С практическими примерами использования аналитики блоков Топ-100 можно ознакомиться в статье [«Всё по полочкам: тематическая веб-аналитика в Интернете с Рамблер/топ-100, часть 2. Аналитика блоков»](https://habrahabr.ru/company/rambler-co/blog/336886/).
